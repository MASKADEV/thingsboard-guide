#### 环境准备

- Jdk8+ (3.2.2版本开始使用Jdk11)
- Maven3.2.1+

#### 获取代码

```shell
##get source from mirror
git clone https://gitclone.com/github.com/thingsboard/thingsboard

##cd to source path
cd thingsboard

##reset remote 
git remote set-url origin https://github.com/thingsboard/thingsboard.git

##checkout branch
git checkout -b release-3.2 origin/release-3.2
```


#### 设置代理

##### maven设置
```
vim ~/.m2/settings.xml
```
mirror内增加如下：
```
<mirror>
 <id>alimaven</id>
 <mirrorOf>*</mirrorOf>
 <name>aliyun maven</name>
 <url>http://maven.aliyun.com/nexus/content/repositories/central/</url>
</mirror>
```
##### yarn设置

* 方法一（如果已经安装）

```
yarn config set registry https://registry.npm.taobao.org
```

* 方法二 

```
touch ~/.yarnrc && vim ~/yarn.rc
```
增加如下内容
```
# THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
# yarn lockfile v1


registry "https://registry.npm.taobao.org"
lastUpdateCheck 1614096367682                           
```

  

#### 编译

```
mvn clean package -DskipTests=true
```


#### TIPS
- Thingsboard 总体工程使用maven进行项目生命周期管理，gradle、node、yarn等都是使用maven插件进行初始化
- Yarn代理也有其他的方式可以尝试
```
方式1 ： 修改子工程pom.xml
<execution>
    <id>yarn install</id>
    <goals>
    <goal>yarn</goal>
    </goals>
    <configuration>
    <arguments>install --registry https://registry.npm.taobao.org</arguments>
    </configuration>
</execution>
方式2，在子工程下增加配置文件（可以尝试）
```
-  [官方编译文档](https://thingsboard.io/docs/user-guide/install/building-from-source/)

